<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Tetris Pro - √âdition Ultime (TypeScript + PixiJS)</title>
    <link rel="stylesheet" href="public/css/style.css">
</head>
<body>
    <div class="game-container" id="game-container">
        <header class="game-header">
            <div>
                <h1>TETRIS <span class="pro-badge">PRO</span></h1>
            </div>
            <div class="header-controls">
                <button id="theme-btn" class="btn btn-small" title="Changer de th√®me">üé®</button>
                <button id="fullscreen-btn" class="btn btn-small" title="Plein √©cran">‚õ∂</button>
                <button id="tutorial-btn" class="btn btn-small" title="Aide">‚ùì</button>
            </div>
        </header>
        
        <main class="game-main">
            <div class="game-left-panel">
                <div class="hold-piece">
                    <h3>R√âSERVE <kbd>C</kbd></h3>
                    <canvas id="hold-canvas" width="100" height="100"></canvas>
                    <p class="hold-hint">Appuyez sur C</p>
                </div>
                
                <div class="statistics-panel">
                    <h3>üìä STATS</h3>
                    <div class="stat-item">
                        <span>‚è±Ô∏è Temps</span>
                        <span id="time-played" class="stat-value">00:00</span>
                    </div>
                    <div class="stat-item">
                        <span>‚ö° PPS</span>
                        <span id="pps" class="stat-value">0.0</span>
                    </div>
                    <div class="stat-item">
                        <span>üî• Combo</span>
                        <span id="combo" class="stat-value combo-highlight">0</span>
                    </div>
                    <div class="stat-item">
                        <span>üèÜ Max Combo</span>
                        <span id="max-combo" class="stat-value">0</span>
                    </div>
                    <div class="stat-item">
                        <span>üíé Tetris</span>
                        <span id="tetris-count" class="stat-value">0</span>
                    </div>
                </div>
            </div>
            
            <div class="game-board">
                <canvas id="game-canvas" width="300" height="600"></canvas>
                <div class="combo-display" id="combo-display"></div>
            </div>
            
            <div class="game-sidebar">
                <div class="next-pieces">
                    <h3>SUIVANTES</h3>
                    <div class="next-piece-container">
                        <canvas id="next-canvas-1" width="100" height="100"></canvas>
                    </div>
                    <div class="next-piece-container small">
                        <canvas id="next-canvas-2" width="80" height="80"></canvas>
                    </div>
                    <div class="next-piece-container small">
                        <canvas id="next-canvas-3" width="80" height="80"></canvas>
                    </div>
                </div>
                
                <div class="game-stats">
                    <div class="stat">
                        <span>SCORE</span>
                        <span id="score" class="score-value">0</span>
                    </div>
                    <div class="stat">
                        <span>NIVEAU</span>
                        <span id="level" class="level-value">1</span>
                    </div>
                    <div class="stat">
                        <span>LIGNES</span>
                        <span id="lines">0</span>
                    </div>
                    <div class="stat">
                        <span>OBJECTIF</span>
                        <span id="goal">10</span>
                    </div>
                    <div class="level-progress">
                        <div class="progress-bar">
                            <div id="progress-fill" class="progress-fill"></div>
                        </div>
                    </div>
                </div>
                
                <div class="game-controls">
                    <button id="start-btn" class="btn btn-primary">‚ñ∂ D√âMARRER</button>
                    <button id="pause-btn" class="btn btn-secondary" disabled>‚è∏ PAUSE</button>
                    <button id="reset-btn" class="btn btn-danger">üîÑ RESET</button>
                </div>
                
                <div class="sensitivity-control">
                    <h3>‚öôÔ∏è SENSIBILIT√â</h3>
                    <div class="sensitivity-slider">
                        <label for="sensitivity-range">D√©placement</label>
                        <input type="range" id="sensitivity-range" min="10" max="100" value="30" step="5">
                        <span id="sensitivity-value">30ms</span>
                    </div>
                    <div class="sensitivity-presets">
                        <button class="preset-btn" data-value="10">Tr√®s rapide</button>
                        <button class="preset-btn" data-value="30">Normal</button>
                        <button class="preset-btn active" data-value="50">Lent</button>
                    </div>
                </div>
                
                <div class="high-scores">
                    <h3>üèÜ TOP 5</h3>
                    <ul id="high-scores-list"></ul>
                </div>
            </div>
        </main>
        
        <div class="game-over" id="game-over" style="display: none;">
            <div class="game-over-content">
                <h2>GAME OVER</h2>
                <div class="final-score-display">
                    <span class="final-score-label">Score Final</span>
                    <span id="final-score" class="final-score-value">0</span>
                </div>
                <div class="final-stats">
                    <div class="final-stat">
                        <span>üéØ Niveau</span>
                        <span id="final-level">1</span>
                    </div>
                    <div class="final-stat">
                        <span>üìè Lignes</span>
                        <span id="final-lines">0</span>
                    </div>
                    <div class="final-stat">
                        <span>‚è±Ô∏è Temps</span>
                        <span id="final-time">00:00</span>
                    </div>
                    <div class="final-stat">
                        <span>üî• Max Combo</span>
                        <span id="final-max-combo">0</span>
                    </div>
                    <div class="final-stat">
                        <span>üíé Tetris</span>
                        <span id="final-tetris">0</span>
                    </div>
                </div>
                <div class="name-input">
                    <input type="text" id="player-name" placeholder="Entrez votre nom" maxlength="10">
                    <button id="save-score-btn" class="btn btn-primary">üíæ SAUVEGARDER</button>
                </div>
            </div>
        </div>
        
        <div class="pause-screen" id="pause-screen" style="display: none;">
            <h2>‚è∏ PAUSE</h2>
            <p>Appuyez sur <kbd>P</kbd> pour continuer</p>
        </div>
        
        <div class="tutorial-overlay" id="tutorial-overlay" style="display: none;">
            <div class="tutorial-content">
                <button class="close-tutorial" id="close-tutorial-btn">‚úï</button>
                <h2>üéÆ Comment jouer √† Tetris Pro</h2>
                
                <div class="tutorial-grid">
                    <div class="tutorial-section">
                        <h3>‚å®Ô∏è Contr√¥les de base</h3>
                        <ul class="controls-list">
                            <li><kbd>‚Üê</kbd> <kbd>‚Üí</kbd> D√©placer lat√©ralement</li>
                            <li><kbd>‚Üì</kbd> Descente rapide (soft drop)</li>
                            <li><kbd>‚Üë</kbd> Rotation horaire</li>
                            <li><kbd>Z</kbd> Rotation anti-horaire</li>
                            <li><kbd>Espace</kbd> / <kbd>Entr√©e</kbd> Chute imm√©diate (hard drop)</li>
                            <li><kbd>C</kbd> Hold - Mettre en r√©serve</li>
                            <li><kbd>P</kbd> Pause</li>
                        </ul>
                    </div>
                    
                    <div class="tutorial-section">
                        <h3>üíØ Scoring</h3>
                        <ul class="scoring-list">
                            <li><strong>1 ligne</strong> = 100 pts √ó niveau</li>
                            <li><strong>2 lignes</strong> = 300 pts √ó niveau</li>
                            <li><strong>3 lignes</strong> = 500 pts √ó niveau</li>
                            <li><strong>4 lignes (Tetris)</strong> = 800 pts √ó niveau</li>
                            <li><strong>Combo</strong> = +50 pts par ligne cons√©cutive</li>
                            <li><strong>Hard Drop</strong> = +2 pts par cellule</li>
                        </ul>
                    </div>
                    
                    <div class="tutorial-section">
                        <h3>üéØ Objectifs</h3>
                        <ul>
                            <li>Compl√©tez des lignes pour marquer des points</li>
                            <li>Faites des Tetris (4 lignes) pour maximiser le score</li>
                            <li>Maintenez un combo pour des points bonus</li>
                            <li>Utilisez le HOLD strat√©giquement</li>
                            <li>Atteignez le niveau 15 pour gagner !</li>
                        </ul>
                    </div>
                    
                    <div class="tutorial-section">
                        <h3>‚ú® Fonctionnalit√©s Pro</h3>
                        <ul>
                            <li><strong>Ghost Piece</strong> : Ombre indiquant o√π la pi√®ce tombera</li>
                            <li><strong>Hold</strong> : R√©servez une pi√®ce pour plus tard</li>
                            <li><strong>Preview</strong> : Voyez les 3 prochaines pi√®ces</li>
                            <li><strong>Stats</strong> : Suivez vos performances en temps r√©el</li>
                            <li><strong>Th√®mes</strong> : Changez l'apparence du jeu</li>
                            <li><strong>Sensibilit√©</strong> : Ajustez la r√©activit√© des contr√¥les</li>
                            <li><strong>WebGL</strong> : Rendu acc√©l√©r√© par PixiJS</li>
                        </ul>
                    </div>
                </div>
                
                <button id="start-tutorial-btn" class="btn btn-primary btn-large">üöÄ Commencer √† jouer !</button>
            </div>
        </div>
        
        <canvas id="particles-canvas"></canvas>
    </div>

    <!-- Chargement du bundle TypeScript via Vite -->
    <script type="module" src="/src/main.ts"></script>
</body>
</html>
